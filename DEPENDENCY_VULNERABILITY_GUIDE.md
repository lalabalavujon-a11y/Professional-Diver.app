# Guide: Reviewing and Fixing GitHub Dependency Vulnerabilities

## Overview
GitHub automatically scans your repository for dependency vulnerabilities using Dependabot. When vulnerabilities are detected, you'll see alerts in the Security tab of your repository.

## How to Review Vulnerabilities

### 1. View Vulnerabilities in GitHub

**Via GitHub Web Interface:**
1. Go to your repository on GitHub
2. Click on the **"Security"** tab
3. Click on **"Dependabot alerts"** in the left sidebar
4. You'll see a list of all detected vulnerabilities with:
   - Severity level (Critical, High, Medium, Low)
   - Package name and version
   - Vulnerability description
   - Suggested fix version
   - CVE (Common Vulnerabilities and Exposures) number

**Via GitHub CLI:**
```bash
gh api repos/:owner/:repo/dependabot/alerts
```

### 2. Review Vulnerabilities Locally

**Using npm:**
```bash
# Run security audit
npm audit

# Get detailed information
npm audit --json

# Show only vulnerabilities (no summary)
npm audit --audit-level=moderate
```

**Using yarn:**
```bash
# Run security audit
yarn audit

# Get detailed information
yarn audit --json
```

**Using pnpm:**
```bash
# Run security audit
pnpm audit

# Get detailed information
pnpm audit --json
```

### 3. Understanding Vulnerability Severity

- **Critical**: Immediate action required - can lead to complete system compromise
- **High**: Should be fixed soon - can lead to significant data loss or system access
- **Medium**: Should be addressed - can lead to limited data exposure
- **Low**: Consider fixing - minimal impact but still a security concern

## How to Fix Vulnerabilities

### Method 1: Automatic Fixes (Recommended)

**npm:**
```bash
# Automatically install compatible updates
npm audit fix

# Force updates (may include breaking changes)
npm audit fix --force
```

**yarn:**
```bash
# Update packages to fix vulnerabilities
yarn upgrade [package-name] --latest
```

**pnpm:**
```bash
# Update packages
pnpm update [package-name] --latest
```

### Method 2: Manual Updates

1. **Identify the vulnerable package:**
   ```bash
   npm audit
   ```

2. **Check available versions:**
   ```bash
   npm view [package-name] versions
   ```

3. **Update to the recommended version:**
   ```bash
   npm install [package-name]@[version]
   ```

4. **Or update all packages:**
   ```bash
   npm update
   ```

### Method 3: Using Dependabot (GitHub)

1. **Enable Dependabot** (if not already enabled):
   - Go to repository Settings â†’ Security & analysis
   - Enable "Dependabot alerts" and "Dependabot security updates"

2. **Create `.github/dependabot.yml`** (optional, for custom configuration):
   ```yaml
   version: 2
   updates:
     - package-ecosystem: "npm"
       directory: "/"
       schedule:
         interval: "weekly"
       open-pull-requests-limit: 10
   ```

3. **Dependabot will automatically create PRs** for security updates

### Method 4: Review and Merge Dependabot PRs

1. Check the **"Pull requests"** tab for Dependabot PRs
2. Review the changes
3. Run tests locally:
   ```bash
   npm test
   ```
4. Merge if tests pass

## Best Practices

### 1. Regular Audits
```bash
# Add to package.json scripts
"scripts": {
  "audit": "npm audit",
  "audit:fix": "npm audit fix"
}
```

### 2. Use `.npmrc` for Security
Create `.npmrc` in your project root:
```
audit=true
audit-level=moderate
```

### 3. Pin Dependency Versions
- Use exact versions (`1.2.3`) for critical dependencies
- Use caret ranges (`^1.2.3`) for minor updates
- Use tilde ranges (`~1.2.3`) for patch updates

### 4. Review Before Updating
- Always review changelogs before major version updates
- Test thoroughly after updating dependencies
- Use a staging environment when possible

### 5. Monitor Regularly
- Set up weekly dependency reviews
- Enable GitHub notifications for security alerts
- Use tools like Snyk or WhiteSource for continuous monitoring

## Common Commands Reference

```bash
# Check for vulnerabilities
npm audit

# Fix automatically (safe updates only)
npm audit fix

# Force fix (may include breaking changes)
npm audit fix --force

# Check outdated packages
npm outdated

# Update all packages
npm update

# Update specific package
npm install package-name@latest

# View package details
npm view package-name

# Check package versions
npm view package-name versions
```

## Troubleshooting

### Issue: `npm audit` shows no vulnerabilities but GitHub does
**Solution:** GitHub may be scanning a different branch or lock file. Ensure you're on the correct branch and have the latest lock file.

### Issue: `npm audit fix` doesn't fix all vulnerabilities
**Solution:** Some vulnerabilities may require manual updates or major version changes. Review each vulnerability individually.

### Issue: Updates break your code
**Solution:** 
1. Review the package changelog
2. Update your code to match the new API
3. Consider using `npm audit fix --force` only after thorough testing

### Issue: Too many vulnerabilities to fix at once
**Solution:**
1. Prioritize Critical and High severity
2. Fix one package at a time
3. Test after each fix
4. Create a tracking issue for remaining vulnerabilities

## Next Steps

1. **Run an audit now:**
   ```bash
   npm audit
   ```

2. **Review the 20 vulnerabilities** GitHub detected:
   - Check each one in GitHub's Security tab
   - Note the severity and affected packages

3. **Create a plan:**
   - Fix Critical/High severity first
   - Test after each batch of fixes
   - Document any breaking changes

4. **Set up automation:**
   - Enable Dependabot security updates
   - Add audit checks to CI/CD pipeline
   - Schedule regular dependency reviews

## Additional Resources

- [GitHub Dependabot Documentation](https://docs.github.com/en/code-security/dependabot)
- [npm audit documentation](https://docs.npmjs.com/cli/v8/commands/npm-audit)
- [OWASP Dependency Check](https://owasp.org/www-project-dependency-check/)
- [Snyk Vulnerability Database](https://snyk.io/vuln)

